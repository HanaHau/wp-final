# å¯µç‰©è¨˜å¸³ APP - å°ˆæ¡ˆæ–‡ä»¶

## ğŸ“‹ å°ˆæ¡ˆæ¦‚è¿°

é€™æ˜¯ä¸€å€‹çµåˆã€Œè¨˜å¸³ã€èˆ‡ã€Œå¯µç‰©é™ªä¼´ã€çš„ Web æ‡‰ç”¨ç¨‹å¼ã€‚ä½¿ç”¨è€…é€éè¨˜å¸³èˆ‡å¯µç‰©äº’å‹•ï¼Œå­˜éŒ¢æœƒè½‰æ›ç‚ºè™›æ“¬é»æ•¸ï¼Œå¯ç”¨æ–¼å¯µç‰©æ¶ˆè²»ã€‚

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### å‰ç«¯
- **æ¡†æ¶**: Next.js 14 (App Router)
- **èªè¨€**: TypeScript
- **æ¨£å¼**: Tailwind CSS
- **ç‹€æ…‹ç®¡ç†**: Zustand
- **åœ–è¡¨**: Recharts
- **èªè­‰**: NextAuth.js (ç°¡åŒ– email ç™»å…¥ï¼Œé–‹ç™¼æ¨¡å¼)

### å¾Œç«¯
- **API**: Next.js API Routes
- **ORM**: Prisma
- **è³‡æ–™åº«**: SQLite (æœ¬åœ°é–‹ç™¼)

### éƒ¨ç½²å»ºè­°ï¼ˆæœªä¾†ï¼‰
- **å‰ç«¯/å¾Œç«¯**: Vercel
- **è³‡æ–™åº«**: Supabase / Neon / Railwayï¼ˆç”Ÿç”¢ç’°å¢ƒå»ºè­°ä½¿ç”¨ PostgreSQLï¼‰

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
wp-final/
â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”œâ”€â”€ (auth)/            # èªè­‰ç›¸é—œé é¢
â”‚   â”œâ”€â”€ dashboard/         # ä¸»ç•«é¢
â”‚   â”œâ”€â”€ statistics/        # çµ±è¨ˆé é¢
â”‚   â”œâ”€â”€ profile/           # å€‹äººè³‡æ–™
â”‚   â””â”€â”€ pet/               # å¯µç‰©è¨­å®š
â”œâ”€â”€ components/            # React å…ƒä»¶
â”‚   â”œâ”€â”€ ui/               # åŸºç¤ UI å…ƒä»¶
â”‚   â”œâ”€â”€ pet/              # å¯µç‰©ç›¸é—œå…ƒä»¶
â”‚   â””â”€â”€ transaction/      # è¨˜å¸³ç›¸é—œå…ƒä»¶
â”œâ”€â”€ lib/                  # å·¥å…·å‡½æ•¸
â”‚   â”œâ”€â”€ prisma.ts         # Prisma å®¢æˆ¶ç«¯
â”‚   â””â”€â”€ utils.ts          # é€šç”¨å·¥å…·
â”œâ”€â”€ prisma/               # Prisma schema
â”œâ”€â”€ public/               # éœæ…‹è³‡æº
â””â”€â”€ types/                # TypeScript é¡å‹å®šç¾©
```

## ğŸ—„ï¸ è³‡æ–™åº« Schema

### æ ¸å¿ƒè³‡æ–™è¡¨

1. **User** - ä½¿ç”¨è€…
   - id, email, name, image, balance, isInitialized, createdAt
   - balance: å¸³æˆ¶é¤˜é¡ï¼ˆèˆ‡å¯µç‰©é»æ•¸ä¸åŒï¼‰
   - isInitialized: æ˜¯å¦å®Œæˆé¦–æ¬¡è¨­å®š

2. **Pet** - å¯µç‰©
   - id, userId, name, imageUrl, facingDirection, points, fullness, mood, health, createdAt
   - facingDirection: å¯µç‰©æœå‘ï¼ˆleft/rightï¼‰ï¼Œç”¨æ–¼æ±ºå®šç§»å‹•æ™‚çš„é¡¯ç¤ºæ–¹å¼

3. **Transaction** - è¨˜å¸³è¨˜éŒ„
   - id, userId, amount, category, type (expense/income/deposit), date, note, createdAt

4. **Category** - é¡åˆ¥ï¼ˆé è¨­ + è‡ªè¨‚ï¼‰
   - id, userId, name, icon, isDefault, createdAt

5. **PetPurchase** - å¯µç‰©è³¼è²·è¨˜éŒ„
   - id, petId, itemId, itemName, category, cost, quantity, purchasedAt

## âœ¨ ä¸»è¦åŠŸèƒ½

### é¦–æ¬¡è¨­å®š
- æ–°ä½¿ç”¨è€…è¨»å†Š/ç™»å…¥å¾Œæœƒé€²å…¥é¦–æ¬¡è¨­å®šé é¢
- è¨­å®šåˆå§‹å¸³æˆ¶é¤˜é¡
- é¸æ“‡/ä¸Šå‚³å¯µç‰©ç…§ç‰‡
- è¨­å®šå¯µç‰©åç¨±
- é¸æ“‡å¯µç‰©æœå‘ï¼ˆæœå·¦/æœå³ï¼‰

### è¨˜å¸³åŠŸèƒ½
- æ”¯å‡ºã€æ”¶å…¥ã€å­˜éŒ¢è¨˜éŒ„
- è‡ªè¨‚é¡åˆ¥ç®¡ç†
- æœˆçµ±è¨ˆèˆ‡é¡åˆ¥çµ±è¨ˆ

### å¯µç‰©ç³»çµ±
- å¯µç‰©åœ¨æˆ¿é–“ä¸­è‡ªå‹•ç§»å‹•
- é¤µé£Ÿå¯µç‰©ï¼ˆå¢åŠ é£½è¶³æ„Ÿï¼‰
- æ’«æ‘¸å¯µç‰©ï¼ˆå¢åŠ å¿ƒæƒ…å€¼ï¼‰
- è³¼è²·é£Ÿç‰©ã€è²¼ç´™ã€é…ä»¶
- è‡ªè¨‚è²¼ç´™èˆ‡é…ä»¶
- å¯µç‰©ç‹€æ…‹é¡¯ç¤ºï¼ˆå¿ƒæƒ…ã€é£½è¶³æ„Ÿã€å¥åº·åº¦ï¼‰

### å•†åº—ç³»çµ±
- ä½¿ç”¨å¯µç‰©é»æ•¸è³¼è²·ç‰©å“
- å…¬é–‹/ç§äººè‡ªè¨‚è²¼ç´™
- ç‰©å“åº«å­˜ç®¡ç†

## ğŸ“ ç’°å¢ƒè®Šæ•¸è¨­å®š

å»ºç«‹ `.env.local` æª”æ¡ˆï¼š

```env
# NextAuth
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-secret-key"
```

**æ³¨æ„**: ç›®å‰ä½¿ç”¨ SQLite è³‡æ–™åº«ï¼ˆç„¡éœ€è¨­å®š DATABASE_URLï¼‰ï¼Œèªè­‰ä½¿ç”¨ç°¡åŒ–çš„ email ç™»å…¥ï¼ˆé–‹ç™¼æ¨¡å¼ï¼‰ã€‚

## ğŸ› ï¸ å®‰è£èˆ‡åŸ·è¡Œ

```bash
# å®‰è£ä¾è³´
npm install

# åˆå§‹åŒ–è³‡æ–™åº«ï¼ˆSQLiteï¼‰
npx prisma generate
npx prisma migrate dev
npm run db:seed

# é–‹ç™¼æ¨¡å¼
npm run dev
```

**ç™»å…¥æ–¹å¼**: åœ¨ç™»å…¥é é¢è¼¸å…¥ä»»æ„ email å³å¯ç™»å…¥ï¼ˆé–‹ç™¼æ¨¡å¼ï¼Œæœƒè‡ªå‹•å»ºç«‹ä½¿ç”¨è€…ï¼‰

## ğŸ“š API è·¯ç”±è¨­è¨ˆ

### è¨˜å¸³ç›¸é—œ
- `GET /api/transactions` - å–å¾—è¨˜å¸³åˆ—è¡¨
- `POST /api/transactions` - æ–°å¢è¨˜å¸³
- `PUT /api/transactions/[id]` - æ›´æ–°è¨˜å¸³
- `DELETE /api/transactions/[id]` - åˆªé™¤è¨˜å¸³

### å¯µç‰©ç›¸é—œ
- `GET /api/pet` - å–å¾—å¯µç‰©è³‡è¨Š
- `PUT /api/pet` - æ›´æ–°å¯µç‰©è³‡è¨Š
- `POST /api/pet/purchase` - å¯µç‰©è³¼è²·ç‰©å“
- `POST /api/pet/pet` - æ’«æ‘¸å¯µç‰©ï¼ˆå¢åŠ å¿ƒæƒ…å€¼ï¼‰

### é¦–æ¬¡è¨­å®šç›¸é—œ
- `GET /api/setup` - æª¢æŸ¥æ˜¯å¦å·²å®Œæˆé¦–æ¬¡è¨­å®š
- `POST /api/setup` - å®Œæˆé¦–æ¬¡è¨­å®šï¼ˆè¨­å®šåˆå§‹é¤˜é¡ã€å¯µç‰©åç¨±ã€ç…§ç‰‡ã€æœå‘ï¼‰

### çµ±è¨ˆç›¸é—œ
- `GET /api/statistics/monthly` - å–å¾—æœˆçµ±è¨ˆ
- `GET /api/statistics/categories` - å–å¾—é¡åˆ¥çµ±è¨ˆ

## ğŸ¯ MVP å„ªå…ˆé †åº

1. **èªè­‰ç³»çµ±** - ä½¿ç”¨è€…ç™»å…¥
2. **è¨˜å¸³åŠŸèƒ½** - åŸºæœ¬ CRUD
3. **å¯µç‰©é¡¯ç¤º** - åŸºç¤å¯µç‰©è³‡è¨Šå±•ç¤º
4. **ä¸»ç•«é¢** - æ•´åˆè¨˜å¸³èˆ‡å¯µç‰©
5. **çµ±è¨ˆé é¢** - åŸºæœ¬çµ±è¨ˆå±•ç¤º

